<html>

<head>
  <title>Lords Mobile Calculator - Troops</title>
  <link rel="shortcut icon" type="image/png" href="./img/icon2.png" />
  <script data-ad-client="ca-pub-6870418910357422" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./styles.css">
  <script src="https://unpkg.com/autonumeric"></script>
  <script src="./functions.js"></script>
  <script src="./functionsTroops.js"></script>
  <style>
    table.troops>tbody>tr>td {
      text-align: center;
    }

    .imgtroop {
      width: 100px;
      height: 100px;
      background-color: grey;
    }

    body {
      background-image: url('./img/stormfox3.jpg');
    }

    @media only screen and (max-width: 768px) {
      .siege {
        display: none;
      }

      .formw60p {
        width: 60%;
        margin-left: auto;
        margin-right: auto !important;
        text-align: center;
      }

      .formw70p {
        width: 70%;
        margin-left: auto;
        margin-right: auto !important;
        text-align: center;
      }

    }

    @media only screen and (max-width: 576px) {
      body {
        background-image: url('./img/stormfox5.jpg');
      }

      /*.form-inline .form-control {
        display: inline-block;
        width: auto;
        vertical-align: middle;
    }*/
      .container {
        /*max-width: 99%;*/
        padding-left: 5px;
        padding-right: 5px;
      }

      .formw50p {
        width: 48%;
      }

      .formw60p {
        width: 60%;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
      }

      .formw70p {
        width: 70%;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
      }

      .captiont {
        display: inline-block;
        margin-bottom: 0px;
        /*-webkit-text-stroke: 0.5px black;
        font-weight: bold;*/
        font-size: 13px;
        line-height: 20px;
        color: rgb(188, 198, 197);
        background-color: rgb(31, 37, 51);
        border-color: rgb(109, 98, 88);
        border-width: 2px;
        border-style: solid;
        /*background-image: radial-gradient(rgba(25, 25, 25, 0.1) 55%, rgba(249, 215, 127, 0.9) 100%); */
        width: 104px;
        margin-left: 0px;
        user-select: none;
        touch-action: manipulation;
      }

      div.itemt>img,
      .imgtroop {
        width: 70px;
        height: 70px;
        background-color: grey;
      }

      div.itemt,
      div.iteme,
      div.itemb,
      div.empty {
        vertical-align: top;
        display: inline-block;
        text-align: center;
        width: 106px;
        margin-right: 3px;
        margin-left: 3px;
        padding-top: 1px;
      }

      .tinput {
        width: 104px;
        border: 2px solid rgb(109, 98, 88);
        text-align: center;
        /*padding-left: 15px;*/
        background-color: rgb(31, 37, 51);
        color: rgb(188, 198, 197);
        margin-bottom: 3px;
      }


    }
  </style>


  <script>
    loadTroops()
    //loadT5();
    var patchTimeSec = 0;
    var totalTroopsTimeSec = 0;
    var barracksCapacity = 0;



    /*
    <select class="form-control" id="subsidy" onchange="setTrap()">
                          <option value="0" selected="selected">Select Preset Traps</option>
                          <option value="1">Solo T2 36M</option>
                          <option value="2">Solo T2 63M</option>
                          <option value="3">Solo T3 51M</option>
                          <option value="4">Rally Mixed   246M</option>
                          <option value="5">Rally 2Troops 128M</option>
                          <option value="6">Rally 2Troops 177M</option>
                          <option value="7">Multi Rally   468M</option>*/
    function setTrap() {
      var trapType = Number(document.getElementById("trapType").value);
      if (trapType == 0) {
        return;
      }
      console.log("setTrap() type:" + trapType);
      if (trapType == 1) {
        console.log("setTrap() grunt:" + document.getElementById("Grunt").value);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(5000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(5000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(2000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      } else if (trapType == 2) {
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(7000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(2000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(4000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      } else if (trapType == 3) {
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(3500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(3500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(2000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(300000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(300000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(300000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      } else if (trapType == 4) {
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(3500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(3500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(3500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(1500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(1500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(1500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      } else if (trapType == 5) {
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(4000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(4000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(900000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(900000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      } else if (trapType == 6) {
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(5000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(5000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(3000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(1200000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(1200000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      } else if (trapType == 7) {
        AutoNumeric.getAutoNumericElement(document.querySelector("#Grunt > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Archer > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataphract > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ballista > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Gladiator > input")).set(6500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Sharpshooter > input")).set(6500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Reptilian_rider > input")).set(6500000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Cataput > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_guard > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Stealth_sniper > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Royal_cavalry > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Fire_Trebuchet > input")).set(0);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_fighter > input")).set(3000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Heroic_Cannoneer > input")).set(3000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Ancient_Drake > input")).set(3000000);
        AutoNumeric.getAutoNumericElement(document.querySelector("#Destroyer > input")).set(0);
      }
      getTotal();
    }

    var gemsPerPatch = 0;
    function getPatchTime() {
      patchTimeSec = secondsByUnit(Number(document.getElementById("tierType").value), Number(document.getElementById("trainingBoost").value)) * Number(document.getElementById("bcapacity").value);
      console.log(patchTimeSec);
      var res = convertTimeShort(Math.ceil(patchTimeSec));

      console.log(res + " secondsToGems(patchTimeSec): " + secondsToGems(patchTimeSec));
      document.getElementById("patchTime").value = "" + res;
      gemsPerPatch = secondsToGems(patchTimeSec)
      //document.getElementById("patchTimeGems").value = gemsPerPatch;
      console.log(document.getElementById("patchTime").value);
      getTotalTime();
      getInventory();

    }



    function getTotal() {
      var timet = 0;
      var mightt = 0;
      var foodt = 0;
      var timbert = 0;
      var oret = 0;
      var rockt = 0;
      var goldt = 0;
      var tomest = 0;
      var gemst = 0;
      var tBoost = Number(document.getElementById("trainingBoost").value);
      var bCapacity = Number(document.getElementById("bcapacity").value);
      var subsidy = Number(document.getElementById("subsidy").value);

      console.log("------------getTotal()---------");
      $(".itemt").each(function () {

        if ($(this).attr('id') && troops[$(this).attr("id")]) {
          //var troopsNum = Number(($(this).find("input.tinput").val()+"").replace(".","").replace(",",""));
          var troopsNum = AutoNumeric.getAutoNumericElement(document.querySelector("#" + $(this).attr("id") + " > input")).getNumber();;
          console.log("itemt $(this).attr('id'): " + $(this).attr('id') + " time: " + timet + " troopsNum:" + troopsNum);
          var timePerPatch = Math.floor(secondsByUnit(troops[$(this).attr("id")].time, tBoost)) * bCapacity;
          gemsPerPatch = secondsToGems(timePerPatch);
          var patchesNeeded = Math.floor(troopsNum / bCapacity);
          var lastPatch = troopsNum % bCapacity;
          var timeLastPatch = Math.floor(secondsByUnit(troops[$(this).attr("id")].time, tBoost) * lastPatch);
          //console.log("lastPatch:"+lastPatch+" timeLastPatch:"+timeLastPatch);
          gemst += secondsToGems(timeLastPatch);
          timet += timeLastPatch;

          gemst += gemsPerPatch * patchesNeeded;
          timet += timePerPatch * patchesNeeded;
          foodt += (troops[$(this).attr("id")].food) * troopsNum * subsidy;
          rockt += (troops[$(this).attr("id")].rock) * troopsNum * subsidy;
          timbert += (troops[$(this).attr("id")].timber) * troopsNum * subsidy;
          oret += (troops[$(this).attr("id")].ore) * troopsNum * subsidy;
          goldt += (troops[$(this).attr("id")].gold) * troopsNum * subsidy;
          mightt += (troops[$(this).attr("id")].might) * troopsNum;
          //console.log("gems:"+gems+" time:"+time+" food:"+food+" might:"+might);

          //console.log("n: "+n+" researches[$(this).attr(\"id\")][n][6]:"+researches[$(this).attr("id")][n][7]);
          //console.log("n: "+n+" tomes:"+tomes);


        }
      });
      console.log("gems:" + gemst + " time:" + timet + " food:" + foodt + " might:" + mightt);

      document.getElementById("totalTimet").innerText = timet > 0 ? convertTimeShort2(timet) : 0;
      //document.getElementById("totalGems").value=gems<1 ? "0" : ""+formatAmount(gems)+" ("+Math.ceil(gems/6800)+"$)";
      document.getElementById("totalGemst").innerText = gemst < 1 ? "0" : "" + formatAmount(gemst);
      document.getElementById("totalMoneyt").innerText = " (" + Math.ceil(gemst / 6800) + "$)";
      document.getElementById("mightt").innerText = formatAmount(mightt);
      document.getElementById("foodt").innerText = formatAmount(foodt);
      console.log("food:" + foodt + " getelement:" + document.getElementById("foodt").innerText);
      document.getElementById("rockt").innerText = formatAmount(rockt);
      document.getElementById("timbert").innerText = formatAmount(timbert);
      document.getElementById("oret").innerText = formatAmount(oret);
      document.getElementById("goldt").innerText = formatAmount(goldt);

    }


    function getTotalTime() {
      var totalTroops = Number(document.getElementById("totalTroops").value);
      barracksCapacity = Number(document.getElementById("bcapacity").value);
      var patchesNeeded = Math.ceil(totalTroops / barracksCapacity);

      document.getElementById("patchesNeeded").value = patchesNeeded;
      var totalTime = patchesNeeded * patchTimeSec;//secondsByUnit(Number(document.getElementById("tierType").value),Number(document.getElementById("trainingBoost").value)) * totalTroops;//
      totalTroopsTimeSec = totalTime;
      console.log("totalTime: " + totalTime);
      console.log("patchesNeeded: " + patchesNeeded + " patchTimeSec:" + convertTimeShort(patchTimeSec) + " gemsPerPatch:" + gemsPerPatch + " gemsPerPatch*patchesNeeded:" + (gemsPerPatch * patchesNeeded));

      //document.getElementById("totalTime").value = convertTimeShort(totalTime);
      //document.getElementById("totalGems").value = formatAmount(gemsPerPatch*patchesNeeded);
    }

    function getInventory() {
      barracksCapacity = Number(document.getElementById("bcapacity").value);

      patchTimeSec = secondsByUnit(Number(document.getElementById("tierType").value), Number(document.getElementById("trainingBoost").value)) * Number(document.getElementById("bcapacity").value);

      document.getElementById("patchTime").value = "" + convertTimeShort(Math.ceil(patchTimeSec));

      $('#slist > div.rem').remove();
      var s3d = Number(document.getElementById("s3d").value);
      var s24h = Number(document.getElementById("s24h").value);
      var s15h = Number(document.getElementById("s15h").value);
      var s8h = Number(document.getElementById("s8h").value);
      var s3h = Number(document.getElementById("s3h").value);
      var s60m = Number(document.getElementById("s60m").value);
      var s30m = 500;//Number(document.getElementById("s30m").value);
      var s15m = Number(document.getElementById("s15m").value);
      var s10m = 500;// Number(document.getElementById("s10m").value);
      var s5m = 500;//Number(document.getElementById("s5m").value);

      var sgems = Number(document.getElementById("sgems").value);

      //totalTroopsTimeSec = Math.floor((patchTimeSec-currentPatchSec)/secondsByUnit(Number(document.getElementById("tierType").value),Number(document.getElementById("trainingBoost").value)));

      console.log("s3d:" + s3d + " mult: " + (s3d * (3600 * 24 * 3)));
      var totalTime = s3d * (3600 * 24 * 3) + s24h * 3600 * 24 + s15h * 3600 * 15 + s3h * 3600 * 3 + s60m * 3600;//+ s30m*60*30 + s15m*60*15 + s10m*60*10 + s5m*60*5;
      console.log("totalTime:" + totalTime);
      document.getElementById("itotalTime").value = totalTime > 0 ? convertTimeShort(totalTime) : "0";
      //console.log("itotalTime:"+totalTime);
      var worked = true;
      var patchCount = 0;
      var tmpTotal = totalTime;//totalTroopsTimeSec;
      var troopsLastPatch = 0;
      while (worked) {
        worked = false;
        var currentPatchSec = patchTimeSec;
        var u3d = 0, u24h = 0, u15h = 0, u8h = 0, u3h = 0, u60m = 0, u30m = 0, u10m = 0, u5m = 0, ugems = 0;
        console.log("start currentPatchSec:" + convertTimeShort(currentPatchSec) + " s24h*3600*24:" + 3600 * 24);
        while (s3d > 0 && currentPatchSec > (3600 * 24 * 3)) {
          console.log("use 3d");
          currentPatchSec -= (3600 * 24 * 3);
          tmpTotal -= (3600 * 24 * 3);
          s3d--;
          u3d++;
        }
        while (s24h > 0 && currentPatchSec > 3600 * 24) {
          currentPatchSec -= 3600 * 24;
          tmpTotal -= 3600 * 24;
          console.log("use s24h from:" + s24h + " Remaining: " + convertTimeShort(currentPatchSec));
          s24h--;
          u24h++;
        }
        console.log("before s15h " + s15h + " currentPatchSec: " + currentPatchSec + " compared:" + (3600 * 15));
        while (s15h > 0 && currentPatchSec > 3600 * 15) {
          currentPatchSec -= 3600 * 15;
          tmpTotal -= 3600 * 15;
          console.log("use s15h" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
          s15h--;
          u15h++;
        }
        while (s8h > 0 && currentPatchSec > 3600 * 8) {
          currentPatchSec -= 3600 * 8;
          tmpTotal -= 3600 * 8;
          console.log("use s8h" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
          s8h--;
          u8h++;
        }
        while (s3h > 0 && currentPatchSec > 3600 * 3) {
          currentPatchSec -= 3600 * 3;
          tmpTotal -= 3600 * 3;
          console.log("use s3h" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
          s3h--;
          u3h++;
        }
        while (s60m > 0 && currentPatchSec > 3600) {
          currentPatchSec -= 3600;
          tmpTotal -= 3600;
          console.log("use s60m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
          s60m--;
          u60m++;
        }
        if (currentPatchSec > 3600 && sgems >= secondsToGems(currentPatchSec)) {
          console.log("use Gems sgems:" + sgems + " secondsToGems(currentPatchSec): " + secondsToGems(currentPatchSec));
          sgems -= secondsToGems(currentPatchSec);
          ugems += secondsToGems(currentPatchSec);
          currentPatchSec = 0;
        }
        if (currentPatchSec == patchTimeSec) {
          console.log("going to break currentPatchSec:" + currentPatchSec + " patchTimeSec:" + patchTimeSec)
          break;
        }
        while (s30m > 0 && currentPatchSec > 60 * 30) {
          currentPatchSec -= 60 * 30;
          tmpTotal -= 60 * 30;
          console.log("use s30m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
          s30m--;
          u30m++;
        }
        while (s15m > 0 && currentPatchSec > 60 * 15) {
          currentPatchSec -= 60 * 15;
          tmpTotal -= 60 * 15;
          console.log("use s15m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
          s15m--;
        }
        if (currentPatchSec < patchTimeSec)
          while (s10m > 0 && currentPatchSec > 60 * 10) {
            currentPatchSec -= 60 * 15;
            tmpTotal -= 60 * 10;
            //console.log("use s10m"+currentPatchSec+" - "+convertTimeShort(currentPatchSec));
            s10m--;
            u10m++;
          }
        if (currentPatchSec < patchTimeSec)
          while (s5m > 0 && currentPatchSec > 60 * 5) {
            currentPatchSec -= 60 * 5;
            tmpTotal -= 60 * 5;
            //console.log("use s5m"+currentPatchSec+" - "+convertTimeShort(currentPatchSec));
            s5m--;
            u5m++;
          }
        //forced:
        if (currentPatchSec > 3600) {
          if (s3h > 0) {
            currentPatchSec -= 3600 * 3;
            tmpTotal -= 3600 * 3;
            console.log("use s3h" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
            s3h--;
            u3h++;
          }
        }
        if (currentPatchSec > 60 * 30) {
          if (s60m > 0) {
            currentPatchSec -= 3600;
            tmpTotal -= 3600;
            console.log("use s60m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
            s60m--;
            u60m++;
          }
        }
        if (currentPatchSec > 60 * 10) {
          if (s30m > 0) {
            currentPatchSec -= 60 * 30;
            tmpTotal -= 60 * 30;
            console.log("use s30m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
            s30m--;
            u30m++;
          }
        }
        if (currentPatchSec > 60 * 5) {
          if (s10m > 0) {
            currentPatchSec -= 60 * 10;
            tmpTotal -= 60 * 10;
            console.log("use s10m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
            s10m--;
            u10m++;
          }
        }
        if (currentPatchSec > 0) {
          if (s5m > 0) {
            currentPatchSec -= 60 * 5;
            tmpTotal -= 60 * 5;
            console.log("use s5m" + currentPatchSec + " - " + convertTimeShort(currentPatchSec));
            s5m--;
            u5m++;
          }
        }

        console.log("END currentPatchSec" + currentPatchSec + " - " + convertTimeShort(currentPatchSec) + " PatchCount: " + patchCount);
        patchCount++;
        addSlist(patchCount, (ugems > 0 ? (" Gems: " + ugems) : "") + (u3d > 0 ? (" 3dx" + u3d) : "") + (u24h > 0 ? (" 24hx" + u24h) : "") + (u15h > 0 ? (" 15hx" + u15h) : "") + (u8h > 0 ? (" 8hx" + u8h) : "") + (u3h > 0 ? (" 3hx" + u3h) : "") + (u60m > 0 ? (" 60mx" + u60m) : "") + (u30m > 0 ? (" 30mx" + u30m) : "") + (u10m > 0 ? (" 10mx" + u10m) : "") + (u5m > 0 ? (" 5mx" + u5m) : ""));
        if (currentPatchSec > 3600) {
          troopsLastPatch = Math.floor((patchTimeSec - currentPatchSec) / secondsByUnit(Number(document.getElementById("tierType").value), Number(document.getElementById("trainingBoost").value)));
          patchCount--;
          break;
        }
        if (patchCount < 2000 && currentPatchSec < 3600) {
          worked = true;
        }
      }
      document.getElementById("ipatches").value = patchCount;
      document.getElementById("itotalTroops").value = formatAmount(patchCount * barracksCapacity + troopsLastPatch);

      console.log("patchCount:" + patchCount + " barracksCapacity: " + barracksCapacity + " itotalTroops:" + formatAmount(patchCount * barracksCapacity + troopsLastPatch));
      getRss(patchCount * barracksCapacity + troopsLastPatch);
    }

    function addSlist(count, list) {
      var newRow = document.getElementById("slist");
      var row = "";

      row += '<div class="row rem"><div class="col-2">' + count + '</div><div class="col-8">' + list + '</div></div>';
      $("#slist").append(row);
      //newRow.append(cols);
    }

    function getRss(totalTroops) {
      var food = 0;
      var rock = 0;
      var timber = 0;
      var ore = 0;
      var gold = 0;
      var might = 0;
      var tierType = document.getElementById("tierType").value
      var troopType = document.getElementById("troopType").value
      var subsidy = Number(document.getElementById("subsidy").value);
      if (tierType == 15) {
        might = totalTroops * 2;
        if (troopType == 1) {
          food = totalTroops * 50;
          rock = totalTroops * 0;
          timber = totalTroops * 50;
          ore = totalTroops * 50;
        } else if (troopType == 2) {
          food = totalTroops * 50;
          rock = totalTroops * 50;
          timber = totalTroops * 50;
          ore = totalTroops * 0;
        } else if (troopType == 3) {
          food = totalTroops * 50;
          rock = totalTroops * 50;
          timber = totalTroops * 0;
          ore = totalTroops * 50;
        } else if (troopType == 4) {
          food = totalTroops * 0;
          rock = totalTroops * 50;
          timber = totalTroops * 50;
          ore = totalTroops * 50;
        }
      } else if (tierType == 30) {
        might = totalTroops * 8;
        gold = totalTroops * 5;
        if (troopType == 1) {
          food = totalTroops * 100;
          rock = totalTroops * 0;
          timber = totalTroops * 100;
          ore = totalTroops * 100;
        } else if (troopType == 2) {
          food = totalTroops * 100;
          rock = totalTroops * 100;
          timber = totalTroops * 100;
          ore = totalTroops * 0;
        } else if (troopType == 3) {
          food = totalTroops * 100;
          rock = totalTroops * 100;
          timber = totalTroops * 0;
          ore = totalTroops * 100;
        } else if (troopType == 4) {
          food = totalTroops * 0;
          rock = totalTroops * 100;
          timber = totalTroops * 100;
          ore = totalTroops * 100;
        }
      } else if (tierType == 60) {
        might = totalTroops * 24;
        gold = totalTroops * 15;
        if (troopType == 1) {
          food = totalTroops * 150;
          rock = totalTroops * 0;
          timber = totalTroops * 150;
          ore = totalTroops * 150;
        } else if (troopType == 2) {
          food = totalTroops * 150;
          rock = totalTroops * 150;
          timber = totalTroops * 150;
          ore = totalTroops * 0;
        } else if (troopType == 3) {
          food = totalTroops * 150;
          rock = totalTroops * 150;
          timber = totalTroops * 0;
          ore = totalTroops * 150;
        } else if (troopType == 4) {
          food = totalTroops * 0;
          rock = totalTroops * 150;
          timber = totalTroops * 150;
          ore = totalTroops * 150;
        }
      } else if (tierType == 120) {
        might = totalTroops * 36;
        if (troopType == 1) {
          food = totalTroops * 1000;
          rock = totalTroops * 0;
          timber = totalTroops * 1000;
          ore = totalTroops * 1000;
        } else if (troopType == 2) {
          food = totalTroops * 1000;
          rock = totalTroops * 1000;
          timber = totalTroops * 1000;
          ore = totalTroops * 0;
        } else if (troopType == 3) {
          food = totalTroops * 1000;
          rock = totalTroops * 1000;
          timber = totalTroops * 0;
          ore = totalTroops * 1000;
        } else if (troopType == 4) {
          food = totalTroops * 0;
          rock = totalTroops * 1000;
          timber = totalTroops * 1000;
          ore = totalTroops * 1000;
        }
        gold = totalTroops * 500;
      }
      console.log("rss food: " + food + " formatAmount(food*subsidy):" + formatAmount(food * subsidy) + " formatAmount(food):" + formatAmount(food));
      document.getElementById("food").innerText = formatAmount(food * subsidy);
      document.getElementById("rockt").innerText = formatAmount(rock * subsidy);
      document.getElementById("timber").innerText = formatAmount(timber * subsidy);
      document.getElementById("ore").innerText = formatAmount(ore * subsidy);
      document.getElementById("gold").innerText = formatAmount(gold * subsidy);
      document.getElementById("might").innerText = formatAmount(might);
    }

    function convertTimeShort(seconds) {
      var numdays = Math.floor(seconds / 86400);
      var numhours = Math.floor((seconds % 86400) / 3600);
      var numminutes = Math.floor(((seconds % 86400) % 3600) / 60);
      var numsecs = Math.ceil(((seconds % 86400) % 3600) % 60);
      //var numseconds = ((seconds % 86400) % 3600) % 60;
      if (numdays)
        return (numdays ? numdays + "d " : "") + (numhours ? ("00" + numhours).substring(("00" + numhours).length - 2) + ":" : "") + (numminutes ? ("00" + numminutes).substring(("00" + numminutes).length - 2) : "00") + ":" + ("00" + numsecs).substring(("00" + numsecs).length - 2);
      else
        return (numhours ? ("00" + numhours).substring(("00" + numhours).length - 2) + ":" : "") + (numminutes ? ("00" + numminutes).substring(("00" + numminutes).length - 2) : "00") + ":" + ("00" + numsecs).substring(("00" + numsecs).length - 2);

    }


  </script>
  <meta name="viewport" content="width=device-width, initial-scale=0.85">
</head>

<body onLoad="getTotal()"
  style="background-color: lightgray; padding-top: 30px;  background-repeat: no-repeat; background-size: cover;">

  <!--navbar-expand-lg-->
  <nav class="navbar  fixed-top navbar-fixed-top  navbar-light bg-light py-1 " style="min-width: 700px;">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
      aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand px-1" href="https://lmcalc.com/"><img src="./img/icon2.png" style="width: 30px;"></a>

    <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="T4">T4 calculator<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item ">
          <a class="nav-link" href="T5">T5 Calculator</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Fam">Familiars Calculator</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="Troops">Troops Training</a>
        </li>
      </ul>
      <!--form class="form-inline my-2 my-sm-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-1 my-sm-0 btn-sm" type="submit">Search</button>
              </form-->
    </div>
    <ul class="nav mr-auto text-nowrap">
      <li class="nav-item">
        <a class="nav-link" href="T4">T4</a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="T5">T5</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="Fam">Familiars</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="Troops">Troops</a>
      </li>
      <!--li class="nav-item">
                  <a class="nav-link disabled" href="#">Troops Simulator</a>
                </li-->
    </ul>
    <!--            <a class="nav-item" href="#">T4 Calculator</a>
            <span class="nav-item" >item there</span>
            <a class="nav-item" href="#">item there</a>
 -->
    <!--span class="border border-primary rounded"><input style="width: 100px" class="form-control form-control-sm mr-sm-1" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success btn-sm my-2 my-sm-0" type="submit">Search</button></span-->

  </nav>


  <div class="container p-2 mb-1 rounded mx-auto"
    style=" width: fit-content; background-color: #dae4e4ba; margin-top: 28px;">
    <div class="text-center font-weight-bold rounded" style="font-size: 140%; ">
      Troops Calculator
    </div>
    <p class="px-2 rounded" style="color: black;">
      Enter the number of troops to train, or select a presetted trap, to calculate the amount of speed-ups/Gems
      required to train a desired amount of troops.
      Boot Camps bundles is asumed, as it is the most cost effective.

    </p>
    <p class="px-2 rounded" style="color: black;">
      To calculate the number of troops trained using current speed-ups and gems on inventory click on "Use inventory +
      Packs". It is also possible to
      simulate the use of Boot Camps bundles, or the addition of gems getting gems packs.
    </p>
    <div class="px-2 rounded" style="width: fit-content; color: black; ">
      Adjust Training Boost, Barracks capacity and Subsidy level.<br>
    </div>
  </div>


  <div class="container ">



    <div class="form-inline justify-content-md-center mb-0 mx-auto">
      <div class="input-group input-group-sm mb-2 mr-sm-2 formw60p">
        <div class="input-group-prepend">
          <div class="input-group-text">Training Boost:</div>
        </div>
        <input type="number" class="form-control" style="width: 72px;" id="trainingBoost" placeholder="0" value="350"
          size="4" style="" onchange="getTotal();getInventory();">
        <div class="input-group-append"><span class="input-group-text">%</span></div>
      </div>
      <div class="input-group input-group-sm mb-2 mr-sm-2 formw60p">
        <div class="input-group-prepend">
          <div class="input-group-text">Barracks Capacity:</div>
        </div>
        <input type="number" class="form-control" id="bcapacity" placeholder="0" size="5" value="13000"
          style="width: 75px;" onchange="getTotal();getInventory();">
      </div>
      <!--div hidden class="input-group input-group-sm mb-2 mr-sm-2 text-center mx-auto">
                    <div class="input-group-prepend"><div class="input-group-text">Troops Trained With Inventory:</div></div>
                    <input readonly type="text" class="form-control font-weight-bold" id="itotalTroops" placeholder="" size="8" value="0" style="width: 95px;">
                  </div-->



      <div hidden class="input-group input-group-sm mb-2 mr-sm-2 ml-1 formw50p">
        <div class="input-group-prepend">
          <div class="input-group-text">Patches needed:</div>
        </div>
        <input readonly type="text" class="form-control" id="patchesNeeded" placeholder="" value=""
          style="width: 42px;">
      </div>
      <div class="input-group input-group-sm mb-2 mr-sm-2 formw60p">
        <div class="input-group-prepend">
          <div class="input-group-text">Subsidy:</div>
        </div>
        <select class="form-control" id="subsidy" onchange="getTotal();getInventory();">
          <option value="1" selected="selected">0%</option>
          <option value="0.995">0.5%</option>
          <option value="0.99">1%</option>
          <option value="0.985">1.5%</option>
          <option value="0.98">2%</option>
          <option value="0.97">3%</option>
          <option value="0.96">4%</option>
          <option value="0.95">5%</option>
          <option value="0.93">7%</option>
          <option value="0.89">11%</option>
          <option value="0.7">30%</option>
        </select>
      </div>


    </div>

    <div class="form-inline justify-content-md-center mb-0 text-center" style="width: 100%;">
      <div class="d-flex flex-row align-items-center">

        <!--div class="d-flex flex-column p-0">
                        <div class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
                            <div  class="input-group-prepend"><div class="input-group-text" style="min-width: 84px;">Gems:</div></div>
                            <input readonly type="text" class="form-control font-weight-bold" id="totalGems" placeholder="" value="" style="width: 110px;">
                        </div>
                        <div class="input-group input-group-sm mb-0 mr-sm-2 ml-1">
                            <div  class="input-group-prepend"><div class="input-group-text" style="min-width: 84px;">SpeedUps:</div></div>
                            <input readonly type="text" class="form-control font-weight-bold" id="totalTime" placeholder="" value="" style="width: 110px;">
                          </div>
                    </div-->
      </div>




    </div>

    <div class="container " style="margin-top: 8px;">







      <div class="form-inline justify-content-md-center mb-0 mt-2">


        <div hidden class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
          <div class="input-group-prepend">
            <div class="input-group-text">Patches With Inventory:</div>
          </div>
          <input readonly type="text" class="form-control" id="ipatches" placeholder="" value="" style="width: 42px;">
        </div>

        <!--div class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
              <div  class="input-group-prepend"><div class="input-group-text">Total Gems:</div></div>
              <input readonly type="text" class="form-control" id="totalGems" placeholder="" value="" style="width: 92px;">
            </div-->

      </div>

      <span hidden id="gems">100</span><span hidden id="speed">100</span>



      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-itemt">
          <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
            aria-selected="true">Troops</a>
        </li>
        <li class="nav-itemt">
          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
            aria-selected="false">Use Inventory + Packs</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
          <div class="d-inline-block" style="background-color: rgb(83 88 84 / 81%); color: white; width: 100%;">
            <div class="form-inline justify-content-md-center mb-0 mt-1">
              <div class="input-group input-group-sm mr-sm-2 formw60p">
                <div class="input-group-prepend">
                  <div class="input-group-text">Trap:</div>
                </div>
                <select class="form-control" id="trapType" onchange="setTrap()">
                  <option value="0" selected="selected">Select Preset Traps</option>
                  <option value="1">Solo T1/T2 36M . . . 149$</option>
                  <option value="2">Solo T1/T2 63M . . . 177$</option>
                  <option value="3">Solo T2/T3 51M . . . 151$</option>
                  <option value="4">Rally Mixed 246M . . 500$</option>
                  <option value="5">Rally R&C 128M . . . 274$</option>
                  <option value="6">Rally R&C 177M . . . 550$</option>
                  <option value="7">Multi Rally 468M . . 971$</option>
                </select>
              </div>
            </div>

            <div class="text-center" style=" color: white;">Might:
              <span id="mightt" class="rss30 pl-2">0</span><img style="height: 20px;" src="./img/might.png">
            </div>

            <div class="text-center mx-auto px-3 ">Required: <span id="totalGemst">0</span><img class="mx-0"
                src="./img/gems.png" style="width: 18px; height: 18px;"> <span id="totalMoneyt"
                style="color:lightgreen"></span>
              / <span id="totalTimet">0</span><img class="mx-0" src="./img/speed.png"
                style="width: 18px; height: 18px;"></div>


            <div class="text-center px-2" style=" color: white;">
              <span id="foodt" class="rss30 pl-2">0</span><img class="icon" src="./img/food.png">
              <span class="text-nowrap"><span class="rss30" id="rockt">0</span><img class="icon" src="./img/rock.png">
              </span>
              <span class="text-nowrap"><span class="rss30" id="timbert">0</span><img class="icon"
                  src="./img/timber.png"></span>
              <span class="text-nowrap"><span class="rss30" id="oret">0</span><img class="icon"
                  src="./img/ore.png"></span>
              <span class="text-nowrap"><span class="rss30" id="goldt">0</span><img class="icon"
                  src="./img/gold.png"></span>
              <!-- Resources: span id="tomes">0</span><img class="icon" src="./img/gear/Archaic_Tome.png"-->
            </div>
          </div>

          <table class="troops  " style="background-color: rgb(83 88 84 / 71%); width: 100%;">
            <tr class="pt-1">
              <td>
                <div class="itemt " id="Grunt">
                  <img src="./img/troops/Grunt.jpg" class="imgtroop" />
                  <span class="captiont">Grunt</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Archer">
                  <img src="./img/troops/Archer.jpg" class="imgtroop" />
                  <span class="captiont">Archer</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Cataphract">
                  <img src="./img/troops/Cataphract.jpg" class="imgtroop" />
                  <span class="captiont">Cataphract</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td class="siege">
                <div class="itemt " id="Ballista">
                  <img src="./img/troops/Ballista.jpg" class="imgtroop" />
                  <span class="captiont">Ballista</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
            </tr>
            <tr class="">
              <td>
                <div class="itemt" id="Gladiator">
                  <img src="./img/troops/Gladiator.jpg" class="imgtroop" />
                  <span class="captiont">Gladiator</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Sharpshooter">
                  <img src="./img/troops/Sharpshooter.jpg" class="imgtroop" />
                  <span class="captiont">Sharpshooter</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Reptilian_rider">
                  <img src="./img/troops/Reptilian_rider.jpg" class="imgtroop" />
                  <span class="captiont">Reptilian Rider</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td class="siege">
                <div class="itemt" id="Cataput">
                  <img src="./img/troops/Catapult.jpg" class="imgtroop" />
                  <span class="captiont">Cataput</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
            </tr>
            <tr class="">
              <td>
                <div class="itemt" id="Royal_guard">
                  <img src="./img/troops/Royal_guard.jpg" class="imgtroop" />
                  <span class="captiont">Royal Guard</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Stealth_sniper">
                  <img src="./img/troops/Stealth_sniper.jpg" class="imgtroop" />
                  <span class="captiont">Stealth Sniper</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Royal_cavalry">
                  <img src="./img/troops/Royal_cavalry.jpg" class="imgtroop" />
                  <span class="captiont">Royal Cavalry</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td class="siege">
                <div class="itemt" id="Fire_Trebuchet">
                  <img src="./img/troops/Fire_Trebuchet.jpg" class="imgtroop" />
                  <span class="captiont">Fire Trebuchet</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
            </tr>
            <tr class="">
              <td>
                <div class="itemt" id="Heroic_fighter">
                  <img src="./img/troops/Heroic_fighter.jpg" class="imgtroop" />
                  <span class="captiont">Heroic Fighter</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Heroic_Cannoneer">
                  <img src="./img/troops/Heroic_Cannoneer.jpg" class="imgtroop" />
                  <span class="captiont">Heroic Cannon.</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td>
                <div class="itemt" id="Ancient_Drake">
                  <img src="./img/troops/Ancient_Drake.jpg" class="imgtroop" />
                  <span class="captiont">Ancient Drake</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
              <td class="siege">
                <div class="itemt" id="Destroyer">
                  <img src="./img/troops/Destroyer.jpg" class="imgtroop" />
                  <span class="captiont">Destroyer</span>
                  <input class="tinput" type="text" value="0" onchange="getTotal()">
                </div>
              </td>
            </tr>
          </table>
        </div>
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">






          <div class="text-center justify-content-md-center mb-0 rounded p-1"
            style="border: 1px solid rgb(14, 12, 12); background-color: rgb(195 197 196 / 71%)">





            <div class="input-group input-group-sm mb-2 p-1 mx-auto" style="width: 350px;">
              <div class="input-group-prepend">
                <div class="input-group-text">Total Time in Inventory:</div>
              </div>
              <input readonly type="text" class="form-control" id="itotalTime" placeholder="" value=""
                style="width: 100px;">
            </div>

            <div class="form-inline justify-content-md-center mb-0 p-1 text-center">
              <!--div class="align-middle pb-2 pr-2" style="width: 100%;"> Inventory:
                            </div-->
              <div class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">3d</div>
                </div>
                <input type="number" class="form-control" id="s3d" placeholder="0" value="0" size="3"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">24h</div>
                </div>
                <input type="number" class="form-control" id="s24h" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">15h</div>
                </div>
                <input type="number" class="form-control" id="s15h" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">8h</div>
                </div>
                <input type="number" class="form-control" id="s8h" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">3h</div>
                </div>
                <input type="number" class="form-control" id="s3h" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">60m</div>
                </div>
                <input type="number" class="form-control" id="s60m" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div hidden class="input-group input-group-sm mb-2 mr-sm-1 formw50p">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">30m</div>
                </div>
                <input type="number" class="form-control" id="s30m" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div hidden class="input-group input-group-sm mb-2 mr-sm-1">
                <div class="input-group-prepend">
                  <div class="input-group-text" style="min-width: 50px;">15m</div>
                </div>
                <input type="number" class="form-control" id="s15m" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div hidden class="input-group input-group-sm mb-2 mr-sm-1">
                <div class="input-group-prepend">
                  <div class="input-group-text">10m</div>
                </div>
                <input type="number" class="form-control" id="s10m" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div hidden class="input-group input-group-sm mb-2 mr-sm-1">
                <div class="input-group-prepend">
                  <div class="input-group-text">5m</div>
                </div>
                <input type="number" class="form-control" id="s5m" placeholder="0" size="3" value="0"
                  style="width: 55px;" onchange="getInventory();">
              </div>
              <div class="input-group input-group-sm mb-2 mr-sm-1 rounded"
                style="border:1px solid rgba(175, 30, 175, 0.699);">
                <div class="input-group-prepend">
                  <div class="input-group-text">Gems</div>
                </div>
                <input type="number" class="form-control" id="sgems" placeholder="0" size="6" value="0"
                  style="width: 85px;" onchange="getInventory();">
              </div>


              <div class="form-inline justify-content-md-center mb-0">
                <button type="submit" class="btn btn-sm btn-info mb-2 mr-2" onclick="addBootCamp5()">Use Boot Camp
                  5$</button>
                <button type="submit" class="btn btn-sm btn-info mb-2 mr-2" onclick="addBootCamp20()">Use Boot Camp
                  20$</button>
                <button hidden type="submit" class="btn btn-sm btn-info mb-2 mr-2" onclick="addGems51()">Use Gem Packed
                  5$</button>
                <button type="submit" class="btn btn-sm btn-info mb-2 mr-2" onclick="addGems5()">Use Lets Celebrate
                  5$</button>
                <button type="submit" class="btn btn-sm btn-info mb-2 mr-2" onclick="addGems10()">Use LordsParty
                  10$</button>

                <div class="input-group input-group-sm mb-2 mr-sm-2 formw60p">
                  <div class="input-group-prepend">
                    <div class="input-group-text">Money Used:</div>
                  </div>
                  <input readonly type="number" class="form-control " id="money" placeholder="" value="0" size="4"
                    style="width: 62px;" onchange="getPatchTime()">
                  <div class="input-group-append"><span class="input-group-text" style="color: grey;">$</span></div>
                </div>


                <!--div class="input-group input-group-sm mb-2 mr-sm-2">
                                  <div class="input-group-prepend"><div class="input-group-text">Barracks Capacity:</div></div>
                                  <input type="number" class="form-control" id="bcapacity" placeholder="8062" size="5" value="8062" style="width: 75px;" onchange="getPatchTime()">
                                </div-->
              </div>
            </div>
            <div class="form-inline justify-content-md-center mb-0 p-1 text-center">



              <div class="input-group input-group-sm mb-2 mr-sm-2 formw70p">
                <div class="input-group-prepend">
                  <div class="input-group-text">Troop Tier:</div>
                </div>
                <select class="form-control" id="tierType" onchange="getInventory()">
                  <option value="15">T1</option>
                  <option value="30">T2</option>
                  <option value="60">T3</option>
                  <option value="120" selected="selected">T4</option>
                </select>
                <div class="input-group-append"><select class="form-control form-control-sm" id="troopType"
                    onchange="getPatchTime()">
                    <option value="1">Infantry</option>
                    <option value="2">Ranged</option>
                    <option value="3">Cavalry</option>
                    <option value="4">Siege</option>
                  </select></div>
              </div>
            </div>
            <div>
              <button type="submit" class="btn btn-sm btn-primary mb-2" onclick="getInventory();">Calculate Troops
                Trained</button>

            </div>

            <div class="form-inline text-center px-4">
              <div class="input-group input-group-sm mb-2  formw80p mx-auto">
                <div class="input-group-prepend">
                  <div class="input-group-text">Troops Trained With Inventory:</div>
                </div>
                <input readonly type="text" class="form-control font-weight-bold" id="itotalTroops" placeholder=""
                  size="8" value="0" style="width: 95px;">
              </div>

            </div>





            <div class="text-center" style="background-color: grey; color: white;">Might Gained:
              <span id="might" class="rss30 pl-2">0</span><img style="height: 20px;" src="./img/might.png">
            </div>
            <div class="text-center" style="background-color: grey; color: white;">
              <span id="food" class="rss30 pl-2">0</span><img class="icon" src="./img/food.png">
              <span class="rss30" id="rock">0</span><img class="icon" src="./img/rock.png">
              <span class="rss30" id="timber">0</span><img class="icon" src="./img/timber.png">
              <span class="rss30" id="ore">0</span><img class="icon" src="./img/ore.png">
              <span class="rss30" id="gold">0</span><img class="icon" src="./img/gold.png">
              <!--Resources Needed: span id="tomes">0</span><img class="icon" src="./img/gear/Archaic_Tome.png"-->
            </div>

            <div class="container rounded" id="slist"
              style="border: 1px solid rgb(14, 12, 12); background-color: rgb(195 197 196 / 71%); max-height: 350px; overflow-y: scroll;">
              <div class="row font-weight-bold text-nowrap">
                <div class="col-2">
                  Patch #
                </div>
                <div class="col-8">
                  Speed-Ups/Gems
                </div>
              </div>
            </div>
            <div class="input-group input-group-sm mx-auto my-1 formw60p">
              <div class="input-group-prepend">
                <div class="input-group-text">Time/Patch:</div>
              </div>
              <input readonly type="text" class="form-control" id="patchTime" placeholder="" value=""
                style="width: 92px;">
            </div>
          </div>

          <div class="form-inline justify-content-md-center mb-0 mt-2">



            <div hidden class="input-group input-group-sm mb-2 mr-sm-2 ml-1 formw50p">
              <div class="input-group-prepend">
                <div class="input-group-text">Patches needed:</div>
              </div>
              <input readonly type="text" class="form-control" id="patchesNeeded" placeholder="" value=""
                style="width: 42px;">
            </div>
            <div hidden class="input-group input-group-sm mb-2 mr-sm-2 formw50p">
              <div class="input-group-prepend">
                <div class="input-group-text">Subsidy:</div>
              </div>
              <select class="form-control" id="subsidy" onchange="getInventory()">
                <option value="1" selected="selected">0%</option>
                <option value="0.995">0.5%</option>
                <option value="0.99">1%</option>
                <option value="0.985">1.5%</option>
                <option value="0.98">2%</option>
                <option value="0.97">3%</option>
                <option value="0.96">4%</option>
                <option value="0.95">5%</option>
                <option value="0.93">7%</option>
                <option value="0.89">11%</option>
                <option value="0.7">30%</option>
              </select>
            </div>


            <div hidden class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
              <div class="input-group-prepend">
                <div class="input-group-text">Patches With Inventory:</div>
              </div>
              <input readonly type="text" class="form-control" id="ipatches" placeholder="" value=""
                style="width: 42px;">
            </div>


            <!--div class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
                              <div  class="input-group-prepend"><div class="input-group-text">Total Gems:</div></div>
                              <input readonly type="text" class="form-control" id="totalGems" placeholder="" value="" style="width: 92px;">
                            </div-->
          </div>
          <!--div class="form-inline justify-content-md-center mb-0 ">
                        <div hidden class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
                            <div  class="input-group-prepend"><div class="input-group-text">Time/Patch:</div></div>
                            <input readonly type="text" class="form-control" id="patchTime" placeholder="" value="" style="width: 92px;">
                          </div>
                        <div hidden class="input-group input-group-sm mb-2 mr-sm-2 ml-1">
                            <div  class="input-group-prepend"><div class="input-group-text">Gems/Patch:</div></div>
                            <input readonly type="text" class="form-control" id="patchTimeGems" placeholder="" value="" style="width: 92px;">
                          </div>



                                    <div class="text-center" style="background-color: grey; color: white;">Might Gained: 
            <span id="might" class="rss30 pl-2">0</span><img style="height: 20px;" src="./img/might.png"> 
        </div>
        <div class="text-center" style="background-color: grey; color: white;"> 
            <span id="food" class="rss30 pl-2">0</span><img class="icon" src="./img/food.png"> 
            <span class="rss30" id="rock">0</span><img class="icon" src="./img/rock.png"> 
            <span class="rss30" id="timber">0</span><img class="icon" src="./img/timber.png">
            <span class="rss30" id="ore">0</span><img class="icon" src="./img/ore.png">
            <span class="rss30" id="gold">0</span><img class="icon" src="./img/gold.png">
        </div>
        <div class="container rounded" id="slist" style="border: 1px solid rgb(14, 12, 12); background-color: rgb(195 197 196 / 71%); max-height: 350px; overflow-y: scroll;">
            <div class="row font-weight-bold text-nowrap">
              <div class="col-2">
                Patch #
              </div>
              <div class="col-8">
                Speed-Ups/Gems
              </div>
            </div>
        </div>
                   
                </div-->
          <div class="tab-pane fade" id="buildings" role="tabpanel" aria-labelledby="buildings-tab">
            <table style="background-color: grey; width: 100%;">
            </table>


          </div>
        </div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- horizontalResponsive -->
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6870418910357422"
          data-ad-slot="9313185958" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

      </div>



      <div class="p-2 rounded mx-auto my-1"
        style="border: 2px black solid; width: fit-content; background-color: #dae4e4ba;">
        <div class="text-center font-weight-bold" style="font-size: 140%;">
          Troops Training
        </div>
        <p class="px-2"
          style="margin-right: auto!important; margin-left: auto!important; width: fit-content; color: black;">
          Please, keep in mind that when using gems to train troops, adjusting the amount of troops to train to use
          exactly 3 day and 1 day speed-ups,
          is more cost effective than using several 15, 8 or 3 hours speed-ups. This might require Barracks Capacity of
          at least 13,000 troops to train
          T2 units using 1D speed-ups.
        </p>




        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- horizontalResponsive -->
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6870418910357422"
          data-ad-slot="9313185958" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

      </div>


      <!-- Trigger/Open The Modal -->
      <button id="myBtn" hidden>Open Modal</button>

      <!-- The Modal -->
      <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>Some text in the Modal..</p>
        </div>

      </div>
      <script>
        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks the button, open the modal 
        btn.onclick = function () {
          modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
          modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
          if (event.target == modal) {
            modal.style.display = "none";
          }
        }
        //$('.caption2').tooltip(options);
        $(document).ready(function () {
          //updateCost();
          initItems();
        });

      </script>
      <script src="./functionsBottom.js"></script>
      <script>
        //<input class="demo" data-a-dec="." data-a-sep="," data-m-dec="2" data-n-bracket="(,)" data-v-max="1000000000000" data-v-min="-1000000000000" id="A" name="A" type="text" value="-1111" "="">
        // autoNumeric with the defaults options
        //anElement = new AutoNumeric(domElement);

        // autoNumeric with specific options being passed

        const settings = {
          createLocalList: false, decimalCharacter: ",", digitGroupSeparator: ".", emptyInputBehavior: "min", minimumValue: "0", decimalPlaces: 0,
          decimalPlacesRawValue: 0,
          decimalPlacesShownOnBlur: 0
        };
        var allInputs = document.querySelectorAll(".itemt > input");
        for (var i = 0; i < allInputs.length; i++) {
          anElement = new AutoNumeric(allInputs[i], settings);
        }

        // autoNumeric with a css selector and a pre-defined language options
        //anElement = new AutoNumeric('input.demo').english();
        getPatchTime();
      </script>

</body>

</html>